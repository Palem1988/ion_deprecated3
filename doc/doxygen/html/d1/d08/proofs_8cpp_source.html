<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>🗺️Ion Core Wallet CE ©️ 👒: src/proofs.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../ion_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">🗺️Ion Core Wallet CE ©️ 👒
   &#160;<span id="projectnumber">2.1.6.0</span>
   </div>
   <div id="projectbrief">(🐼🐼CEVAP🐼🐼 DevWiki 👯Community Edition👯)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">proofs.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d08/proofs_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2009-2010 Satoshi Nakamoto</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Copyright (c) 2009-2014 The Bitcoin developers</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Copyright (c) 2015-2017 The Silk Network developers</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// Distributed under the MIT software license, see the accompanying</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// file COPYING or http://www.opensource.org/licenses/mit-license.php.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d48/proofs_8h.html">proofs.h</a>&quot;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/ddb/chainparams_8h.html">chainparams.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dbf/main_8h.html">main.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d4d/uint256_8h.html">uint256.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d3c/util_8h.html">util.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d2f/amount_8h.html">amount.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dd7/checkpoints_8h.html">checkpoints.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span> </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="../../d1/d08/proofs_8cpp.html#a621f4f63be83358641eb78f48d2f49c2">   19</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a621f4f63be83358641eb78f48d2f49c2">nStakeMinAge</a>       = 1 * 60 * 60;</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="../../d4/dd4/stake_8h.html#a12388da9cd7b3a99208684bd4535f098">   20</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a12388da9cd7b3a99208684bd4535f098">nModifierInterval</a>  = 2 * 60 * 60;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="../../d3/d51/class_c_block.html#a681acf1fa72ec2ed6c83ea5afc14e0f3">   22</a></span>&#160;<a class="code" href="../../d2/d86/classuint256.html">uint256</a> <a class="code" href="../../d3/d51/class_c_block.html#a681acf1fa72ec2ed6c83ea5afc14e0f3">CBlock::GetHash</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d3/d51/class_c_block.html#af203beb528a62ec30b0453cf5d860044">GetPoWHash</a>();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;}</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="../../d3/d51/class_c_block.html#af203beb528a62ec30b0453cf5d860044">   26</a></span>&#160;<a class="code" href="../../d2/d86/classuint256.html">uint256</a> <a class="code" href="../../d3/d51/class_c_block.html#af203beb528a62ec30b0453cf5d860044">CBlock::GetPoWHash</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../db/dfb/hash_8h.html#ab3f6c437460137530d86e09c2c102e99">Hash</a>(<a class="code" href="../../d8/d3c/util_8h.html#a5f5e63e2c340bc52049e38c09b37e6e1">BEGIN</a>(<a class="code" href="../../d3/d51/class_c_block.html#a6f7ce520ce3c63adc6216f9d41d04476">nVersion</a>), <a class="code" href="../../d8/d3c/util_8h.html#ac32457d3f041434e57a2924847796fda">END</a>(<a class="code" href="../../d3/d51/class_c_block.html#afd78e38be105c00158198be96e1b6f5d">nNonce</a>));</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#a97478c8207cae73889a6b1fbbc3c67e3">   30</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a97478c8207cae73889a6b1fbbc3c67e3">DetermineCoinbaseMaturity</a>() {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../df/d0a/main_8cpp.html#a6454ad864029344132a0a0b59b1456ee">pindexBest</a>-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#aebfc8d6b95852546760e742553d7bfd5">nHeight</a> &lt;= 100) {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)10; <span class="comment">// This will allow for premine distribution to propogate faster</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)60; <span class="comment">// Coinbase will take approx. 1 hr to reach confirmation</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        }</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// miner&#39;s coin base reward</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#af6a2f3451bae59ba9d7a6d627173aedf">   39</a></span>&#160;int64_t <a class="code" href="../../d1/d08/proofs_8cpp.html#af6a2f3451bae59ba9d7a6d627173aedf">GetCoinbaseValue</a>(<span class="keywordtype">int</span> nHeight, <a class="code" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a> nFees)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a> nSubsidy = 0;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">if</span>(nHeight == 1) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                nSubsidy = 16400000 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> nSubsidy;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// miner&#39;s coin stake reward based on coin age spent (coin-days)</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#a84af3aad491438b64bc1a79a7fd1d659">   51</a></span>&#160;int64_t <a class="code" href="../../d1/d08/proofs_8cpp.html#a84af3aad491438b64bc1a79a7fd1d659">GetCoinstakeValue</a>(int64_t nCoinAge, <a class="code" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a> nFees, <span class="keywordtype">int</span> nHeight)</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <a class="code" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a> nSubsidy = 0.2 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span>(nHeight &lt;= 125146) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                nSubsidy = 23 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nHeight &lt;= 568622) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                nSubsidy = 17 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nHeight &lt;= 1012098) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                nSubsidy = 11.5 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nHeight &lt;= 1455574) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                nSubsidy = 5.75 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nHeight &lt;= 3675950) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                nSubsidy = 1.85 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                nSubsidy = 0.2 * <a class="code" href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> nSubsidy + nFees;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#a868a58404bd61b6a82901f428d152bae">   72</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a868a58404bd61b6a82901f428d152bae">GetNextTargetRequired</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexLast, <span class="keywordtype">bool</span> fProofOfStake)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#aebfc8d6b95852546760e742553d7bfd5">nHeight</a> &lt; <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().Fork1Height()){</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a206d1c747985d51a94cdfc830357114a">GetNextTargetRequiredV1</a>(pindexLast, fProofOfStake);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#af2f79935ec3c4e7b1e9ab32ee4da0f06">GetNextTargetRequiredV2</a>(pindexLast, fProofOfStake);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    </div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#a206d1c747985d51a94cdfc830357114a">   82</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a206d1c747985d51a94cdfc830357114a">GetNextTargetRequiredV1</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexLast, <span class="keywordtype">bool</span> fProofOfStake)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnTargetLimit = fProofOfStake ? <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a0d272ca248d729b840fb331a26a95dff">ProofOfStakeLimit</a>() : <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#af171e47287f097c8753b9581fd3c3c58">ProofOfWorkLimit</a>();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (pindexLast == NULL)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> bnTargetLimit.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>(); <span class="comment">// genesis block</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexPrev = <a class="code" href="../../df/d0a/main_8cpp.html#a67a2382a391340c12c45961f3b8c66e8">GetLastBlockIndex</a>(pindexLast, fProofOfStake);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (pindexPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a1ef11137155df1dd5c81491630cece39">pprev</a> == NULL)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> bnTargetLimit.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>(); <span class="comment">// first block</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexPrevPrev = <a class="code" href="../../df/d0a/main_8cpp.html#a67a2382a391340c12c45961f3b8c66e8">GetLastBlockIndex</a>(pindexPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a1ef11137155df1dd5c81491630cece39">pprev</a>, fProofOfStake);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (pindexPrevPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a1ef11137155df1dd5c81491630cece39">pprev</a> == NULL)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">return</span> bnTargetLimit.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>(); <span class="comment">// second block</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    int64_t nActualSpacing = pindexPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">GetBlockTime</a>() - pindexPrevPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">GetBlockTime</a>();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (nActualSpacing &lt; 0) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        nActualSpacing = <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fProofOfStake &amp;&amp; nActualSpacing &gt; <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().TargetSpacing() * 10) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         nActualSpacing = <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() * 10;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// target change every block</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// retarget with exponential moving toward target spacing</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Includes fix for wrong retargeting difficulty by Mammix2</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnNew;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    bnNew.<a class="code" href="../../d2/d86/classuint256.html#a54bc91c8535c43f881bba1fdb11ca7fa">SetCompact</a>(pindexPrev-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a3324894e6af612d1bd76f89378435713">nBits</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    int64_t nInterval = fProofOfStake ? 10 : 10;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    bnNew *= ((nInterval - 1) * <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() + nActualSpacing + nActualSpacing);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    bnNew /= ((nInterval + 1) * <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>());</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (bnNew &lt;= 0 || bnNew &gt; bnTargetLimit)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        bnNew = bnTargetLimit;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> bnNew.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// This is MIDAS (Multi Interval Difficulty Adjustment System), a novel getnextwork algorithm.  It responds quickly to</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// huge changes in hashing power, is immune to time warp attacks, and regulates the block rate to keep the block height</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// close to the block height expected given the nominal block interval and the elapsed time.  How close the</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// correspondence between block height and wall clock time is, depends on how stable the hashing power has been.  Maybe</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// Bitcoin can wait 2 weeks between updates but no altcoin can.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// It is important that none of these intervals (5, 7, 9, 17) have any common divisor; eliminating the existence of</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// harmonics is an important part of eliminating the effectiveness of timewarp attacks.</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d1/d08/proofs_8cpp.html#a469ea92d4b256cc9b5dba1dfa5dcf06e">  129</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a469ea92d4b256cc9b5dba1dfa5dcf06e">avgRecentTimestamps</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexLast, int64_t *avgOf5, int64_t *avgOf7, int64_t *avgOf9, int64_t *avgOf17)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">int</span> blockoffset = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  int64_t oldblocktime;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  int64_t blocktime;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  *avgOf5 = *avgOf7 = *avgOf9 = *avgOf17 = 0;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (pindexLast)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    blocktime = pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">GetBlockTime</a>();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">else</span> blocktime = 0;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">for</span> (blockoffset = 0; blockoffset &lt; 17; blockoffset++)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    oldblocktime = blocktime;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (pindexLast)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      pindexLast = pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a1ef11137155df1dd5c81491630cece39">pprev</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      blocktime = pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">GetBlockTime</a>();</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    { <span class="comment">// genesis block or previous</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    blocktime -= <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// for each block, add interval.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (blockoffset &lt; 5) *avgOf5 += (oldblocktime - blocktime);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (blockoffset &lt; 7) *avgOf7 += (oldblocktime - blocktime);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (blockoffset &lt; 9) *avgOf9 += (oldblocktime - blocktime);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    *avgOf17 += (oldblocktime - blocktime);    </div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// now we have the sums of the block intervals. Division gets us the averages. </span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  *avgOf5 /= 5;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  *avgOf7 /= 7;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  *avgOf9 /= 9;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  *avgOf17 /= 17;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//unsigned int GetNextWorkRequired(const CBlockIndex *pindexLast, const CBlockHeader *pblock)</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#af2f79935ec3c4e7b1e9ab32ee4da0f06">  166</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#af2f79935ec3c4e7b1e9ab32ee4da0f06">GetNextTargetRequiredV2</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a>* pindexLast, <span class="keywordtype">bool</span> fProofOfStake)</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    int64_t avgOf5;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    int64_t avgOf9;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    int64_t avgOf7;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    int64_t avgOf17;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    int64_t toofast;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    int64_t tooslow;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    int64_t difficultyfactor = 10000;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    int64_t now;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    int64_t BlockHeightTime;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    int64_t nFastInterval = (<a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() * 9 ) / 10; <span class="comment">// seconds per block desired when far behind schedule</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    int64_t nSlowInterval = (<a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() * 11) / 10; <span class="comment">// seconds per block desired when far ahead of schedule</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    int64_t nIntervalDesired;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnTargetLimit = fProofOfStake ? <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a0d272ca248d729b840fb331a26a95dff">ProofOfStakeLimit</a>() : <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#af171e47287f097c8753b9581fd3c3c58">ProofOfWorkLimit</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nTargetLimit = bnTargetLimit.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    </div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (pindexLast == NULL)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">// Genesis Block</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> nTargetLimit;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   </div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Regulate block times so as to remain synchronized in the long run with the actual time.  The first step is to</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// calculate what interval we want to use as our regulatory goal.  It depends on how far ahead of (or behind)</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// schedule we are.  If we&#39;re more than an adjustment period ahead or behind, we use the maximum (nSlowInterval) or minimum</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// (nFastInterval) values; otherwise we calculate a weighted average somewhere in between them.  The closer we are</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// to being exactly on schedule the closer our selected interval will be to our nominal interval (TargetSpacing).</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    now = pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">GetBlockTime</a>();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    BlockHeightTime = <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#abee677792d8f64e9dc766738ca0fbb55">GenesisBlock</a>().<a class="code" href="../../d3/d51/class_c_block.html#af1a91982c7a291952a279ee341ee1713">nTime</a> + pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#aebfc8d6b95852546760e742553d7bfd5">nHeight</a> * <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    </div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (now &lt; BlockHeightTime + <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().TargetTimespan() &amp;&amp; now &gt; BlockHeightTime )</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// ahead of schedule by less than one interval.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    nIntervalDesired = ((<a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a3a3f83ef3c1492eb473756db0a7f6d2d">TargetTimespan</a>() - (now - BlockHeightTime)) * <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() +  </div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                (now - BlockHeightTime) * nFastInterval) / <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (now + <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().TargetTimespan() &gt; BlockHeightTime &amp;&amp; now &lt; BlockHeightTime)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// behind schedule by less than one interval.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    nIntervalDesired = ((<a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a3a3f83ef3c1492eb473756db0a7f6d2d">TargetTimespan</a>() - (BlockHeightTime - now)) * <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">TargetSpacing</a>() + </div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                (BlockHeightTime - now) * nSlowInterval) / <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#a3a3f83ef3c1492eb473756db0a7f6d2d">TargetTimespan</a>();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// ahead by more than one interval;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (now &lt; BlockHeightTime) nIntervalDesired = nSlowInterval;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    </div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// behind by more than an interval. </span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">else</span>  nIntervalDesired = nFastInterval;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    </div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// find out what average intervals over last 5, 7, 9, and 17 blocks have been. </span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="../../d1/d08/proofs_8cpp.html#a469ea92d4b256cc9b5dba1dfa5dcf06e">avgRecentTimestamps</a>(pindexLast, &amp;avgOf5, &amp;avgOf7, &amp;avgOf9, &amp;avgOf17);    </div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// check for emergency adjustments. These are to bring the diff up or down FAST when a burst miner or multipool</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// jumps on or off.  Once they kick in they can adjust difficulty very rapidly, and they can kick in very rapidly</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// after massive hash power jumps on or off.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    </div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Important note: This is a self-damping adjustment because 8/5 and 5/8 are closer to 1 than 3/2 and 2/3.  Do not</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// screw with the constants in a way that breaks this relationship.  Even though self-damping, it will usually</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// overshoot slightly. But normal adjustment will handle damping without getting back to emergency.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    toofast = (nIntervalDesired * 2) / 3;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    tooslow = (nIntervalDesired * 3) / 2;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// both of these check the shortest interval to quickly stop when overshot.  Otherwise first is longer and second shorter.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (avgOf5 &lt; toofast &amp;&amp; avgOf9 &lt; toofast &amp;&amp; avgOf17 &lt; toofast)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    {  <span class="comment">//emergency adjustment, slow down (longer intervals because shorter blocks)</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;GetNextWorkRequired EMERGENCY RETARGET\n&quot;</span>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      difficultyfactor *= 8;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      difficultyfactor /= 5;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avgOf5 &gt; tooslow &amp;&amp; avgOf7 &gt; tooslow &amp;&amp; avgOf9 &gt; tooslow)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {  <span class="comment">//emergency adjustment, speed up (shorter intervals because longer blocks)</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;GetNextWorkRequired EMERGENCY RETARGET\n&quot;</span>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      difficultyfactor *= 5;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      difficultyfactor /= 8;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// If no emergency adjustment, check for normal adjustment. </span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((avgOf5 &gt; nIntervalDesired || avgOf7 &gt; nIntervalDesired) &amp;&amp; avgOf9 &gt; nIntervalDesired &amp;&amp; avgOf17 &gt; nIntervalDesired) ||</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         ((avgOf5 &lt; nIntervalDesired || avgOf7 &lt; nIntervalDesired) &amp;&amp; avgOf9 &lt; nIntervalDesired &amp;&amp; avgOf17 &lt; nIntervalDesired))</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    { <span class="comment">// At least 3 averages too high or at least 3 too low, including the two longest. This will be executed 3/16 of</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="comment">// the time on the basis of random variation, even if the settings are perfect. It regulates one-sixth of the way</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="comment">// to the calculated point.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;GetNextWorkRequired RETARGET\n&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      difficultyfactor *= (6 * nIntervalDesired);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      difficultyfactor /= (avgOf17 +(5 * nIntervalDesired));</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// limit to doubling or halving.  There are no conditions where this will make a difference unless there is an</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// unsuspected bug in the above code.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (difficultyfactor &gt; 20000) difficultyfactor = 20000;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (difficultyfactor &lt; 5000) difficultyfactor = 5000;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnNew;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnOld;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    bnOld.<a class="code" href="../../d2/d86/classuint256.html#a54bc91c8535c43f881bba1fdb11ca7fa">SetCompact</a>(pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a3324894e6af612d1bd76f89378435713">nBits</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (difficultyfactor == 10000) <span class="comment">// no adjustment. </span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">return</span>(bnOld.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>());</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    bnNew = bnOld / difficultyfactor;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    bnNew *= 10000;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (bnNew &gt; <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#af171e47287f097c8753b9581fd3c3c58">ProofOfWorkLimit</a>())</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      bnNew = <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().<a class="code" href="../../d1/d4f/class_c_chain_params.html#af171e47287f097c8753b9581fd3c3c58">ProofOfWorkLimit</a>();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;Actual time %d, Scheduled time for this block height = %d\n&quot;</span>, now, BlockHeightTime );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;Nominal block interval = %d, regulating on interval %d to get back to schedule.\n&quot;</span>, </div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().TargetSpacing(), nIntervalDesired );</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;Intervals of last 5/7/9/17 blocks = %d / %d / %d / %d.\n&quot;</span>,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          avgOf5, avgOf7, avgOf9, avgOf17);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a>(<span class="stringliteral">&quot;difficulty&quot;</span>, <span class="stringliteral">&quot;Difficulty Before Adjustment: %08x  %s\n&quot;</span>, pindexLast-&gt;<a class="code" href="../../d3/dbd/class_c_block_index.html#a3324894e6af612d1bd76f89378435713">nBits</a>, bnOld.<a class="code" href="../../da/df7/classbase__uint.html#acccba4d9d51a0c36261718ca0cbb293b">ToString</a>());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="../../d8/d3c/util_8h.html#afc02c0a4258fedfb316be612bb659ba8">LogPrintf</a>(<span class="stringliteral">&quot;Difficulty After Adjustment:  %08x  %s\n&quot;</span>, bnNew.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>(), bnNew.<a class="code" href="../../da/df7/classbase__uint.html#acccba4d9d51a0c36261718ca0cbb293b">ToString</a>());</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> bnNew.<a class="code" href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">GetCompact</a>();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;     </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d7/d48/proofs_8h.html#a20a76dbc6ac5b8a6e0aaef85522b1069">  282</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d1/d08/proofs_8cpp.html#a20a76dbc6ac5b8a6e0aaef85522b1069">CheckProofOfWork</a>(<a class="code" href="../../d2/d86/classuint256.html">uint256</a> hash, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d3/d51/class_c_block.html#a4b978e9c3c8d0edd8a32031348b4086f">nBits</a>)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="../../d2/d86/classuint256.html">uint256</a> bnTarget;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    bnTarget.<a class="code" href="../../d2/d86/classuint256.html#a54bc91c8535c43f881bba1fdb11ca7fa">SetCompact</a>(nBits);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// Check range</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (bnTarget &lt;= 0 || bnTarget &gt; <a class="code" href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a>().ProofOfWorkLimit())</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d3c/util_8h.html#af8985880cf4ef26df0a5aa2ffcb76662">error</a>(<span class="stringliteral">&quot;CheckProofOfWork() : nBits below minimum work&quot;</span>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Check proof of work matches claimed amount</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (hash &gt; bnTarget)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d3c/util_8h.html#af8985880cf4ef26df0a5aa2ffcb76662">error</a>(<span class="stringliteral">&quot;CheckProofOfWork() : hash doesn&#39;t match nBits&quot;</span>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div><div class="ttc" id="proofs_8cpp_html_a469ea92d4b256cc9b5dba1dfa5dcf06e"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a469ea92d4b256cc9b5dba1dfa5dcf06e">avgRecentTimestamps</a></div><div class="ttdeci">void avgRecentTimestamps(const CBlockIndex *pindexLast, int64_t *avgOf5, int64_t *avgOf7, int64_t *avgOf9, int64_t *avgOf17)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00129">proofs.cpp:129</a></div></div>
<div class="ttc" id="classbase__uint_html_acccba4d9d51a0c36261718ca0cbb293b"><div class="ttname"><a href="../../da/df7/classbase__uint.html#acccba4d9d51a0c36261718ca0cbb293b">base_uint::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d69/uint256_8cpp_source.html#l00199">uint256.cpp:199</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a868a58404bd61b6a82901f428d152bae"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a868a58404bd61b6a82901f428d152bae">GetNextTargetRequired</a></div><div class="ttdeci">unsigned int GetNextTargetRequired(const CBlockIndex *pindexLast, bool fProofOfStake)</div><div class="ttdoc">Calculate difficulty using retarget algorithm by maintaining target. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00072">proofs.cpp:72</a></div></div>
<div class="ttc" id="class_c_block_index_html_a9fe0d4463c07c466f66252e8eec25f5c"><div class="ttname"><a href="../../d3/dbd/class_c_block_index.html#a9fe0d4463c07c466f66252e8eec25f5c">CBlockIndex::GetBlockTime</a></div><div class="ttdeci">int64_t GetBlockTime() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l01015">main.h:1015</a></div></div>
<div class="ttc" id="class_c_block_index_html_a1ef11137155df1dd5c81491630cece39"><div class="ttname"><a href="../../d3/dbd/class_c_block_index.html#a1ef11137155df1dd5c81491630cece39">CBlockIndex::pprev</a></div><div class="ttdeci">CBlockIndex * pprev</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00900">main.h:900</a></div></div>
<div class="ttc" id="class_c_block_html_af203beb528a62ec30b0453cf5d860044"><div class="ttname"><a href="../../d3/d51/class_c_block.html#af203beb528a62ec30b0453cf5d860044">CBlock::GetPoWHash</a></div><div class="ttdeci">uint256 GetPoWHash() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00026">proofs.cpp:26</a></div></div>
<div class="ttc" id="util_8h_html_ac32457d3f041434e57a2924847796fda"><div class="ttname"><a href="../../d8/d3c/util_8h.html#ac32457d3f041434e57a2924847796fda">END</a></div><div class="ttdeci">#define END(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00048">util.h:48</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a621f4f63be83358641eb78f48d2f49c2"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a621f4f63be83358641eb78f48d2f49c2">nStakeMinAge</a></div><div class="ttdeci">unsigned int nStakeMinAge</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00019">proofs.cpp:19</a></div></div>
<div class="ttc" id="amount_8h_html_aed6bcb17bc73a5dcf33250e9c2c023cc"><div class="ttname"><a href="../../dd/d2f/amount_8h.html#aed6bcb17bc73a5dcf33250e9c2c023cc">COIN</a></div><div class="ttdeci">static const CAmount COIN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2f/amount_8h_source.html#l00017">amount.h:17</a></div></div>
<div class="ttc" id="class_c_block_html_a4b978e9c3c8d0edd8a32031348b4086f"><div class="ttname"><a href="../../d3/d51/class_c_block.html#a4b978e9c3c8d0edd8a32031348b4086f">CBlock::nBits</a></div><div class="ttdeci">unsigned int nBits</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00633">main.h:633</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a97478c8207cae73889a6b1fbbc3c67e3"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a97478c8207cae73889a6b1fbbc3c67e3">DetermineCoinbaseMaturity</a></div><div class="ttdeci">int DetermineCoinbaseMaturity()</div><div class="ttdoc">Determine Coinbase Maturity (generally not a good idea - done so to increase speed) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00030">proofs.cpp:30</a></div></div>
<div class="ttc" id="class_c_chain_params_html_a0d272ca248d729b840fb331a26a95dff"><div class="ttname"><a href="../../d1/d4f/class_c_chain_params.html#a0d272ca248d729b840fb331a26a95dff">CChainParams::ProofOfStakeLimit</a></div><div class="ttdeci">const uint256 &amp; ProofOfStakeLimit() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddb/chainparams_8h_source.html#l00062">chainparams.h:62</a></div></div>
<div class="ttc" id="class_c_block_html_af1a91982c7a291952a279ee341ee1713"><div class="ttname"><a href="../../d3/d51/class_c_block.html#af1a91982c7a291952a279ee341ee1713">CBlock::nTime</a></div><div class="ttdeci">unsigned int nTime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00632">main.h:632</a></div></div>
<div class="ttc" id="chainparams_8h_html"><div class="ttname"><a href="../../d7/ddb/chainparams_8h.html">chainparams.h</a></div></div>
<div class="ttc" id="proofs_8cpp_html_af2f79935ec3c4e7b1e9ab32ee4da0f06"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#af2f79935ec3c4e7b1e9ab32ee4da0f06">GetNextTargetRequiredV2</a></div><div class="ttdeci">unsigned int GetNextTargetRequiredV2(const CBlockIndex *pindexLast, bool fProofOfStake)</div><div class="ttdoc">Calculate difficulty using retarget algorithm V2 by maintaining target. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00166">proofs.cpp:166</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a20a76dbc6ac5b8a6e0aaef85522b1069"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a20a76dbc6ac5b8a6e0aaef85522b1069">CheckProofOfWork</a></div><div class="ttdeci">bool CheckProofOfWork(uint256 hash, unsigned int nBits)</div><div class="ttdoc">Check whether a block hash satisfies the proof-of-work requirement specified by nBits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00282">proofs.cpp:282</a></div></div>
<div class="ttc" id="main_8h_html"><div class="ttname"><a href="../../d4/dbf/main_8h.html">main.h</a></div></div>
<div class="ttc" id="amount_8h_html_a4eaf3a5239714d8c45b851527f7cb564"><div class="ttname"><a href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a></div><div class="ttdeci">int64_t CAmount</div><div class="ttdoc">Amount in satoshis (Can be negative) </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2f/amount_8h_source.html#l00015">amount.h:15</a></div></div>
<div class="ttc" id="class_c_block_html_afd78e38be105c00158198be96e1b6f5d"><div class="ttname"><a href="../../d3/d51/class_c_block.html#afd78e38be105c00158198be96e1b6f5d">CBlock::nNonce</a></div><div class="ttdeci">unsigned int nNonce</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00634">main.h:634</a></div></div>
<div class="ttc" id="class_c_chain_params_html_af171e47287f097c8753b9581fd3c3c58"><div class="ttname"><a href="../../d1/d4f/class_c_chain_params.html#af171e47287f097c8753b9581fd3c3c58">CChainParams::ProofOfWorkLimit</a></div><div class="ttdeci">const uint256 &amp; ProofOfWorkLimit() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddb/chainparams_8h_source.html#l00061">chainparams.h:61</a></div></div>
<div class="ttc" id="util_8h_html_afc02c0a4258fedfb316be612bb659ba8"><div class="ttname"><a href="../../d8/d3c/util_8h.html#afc02c0a4258fedfb316be612bb659ba8">LogPrintf</a></div><div class="ttdeci">#define LogPrintf(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00152">util.h:152</a></div></div>
<div class="ttc" id="checkpoints_8h_html"><div class="ttname"><a href="../../d8/dd7/checkpoints_8h.html">checkpoints.h</a></div></div>
<div class="ttc" id="util_8h_html_aab1f837a2366f424bdc996fdf6352171"><div class="ttname"><a href="../../d8/d3c/util_8h.html#aab1f837a2366f424bdc996fdf6352171">LogPrint</a></div><div class="ttdeci">static int LogPrint(const char *category, const char *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00186">util.h:186</a></div></div>
<div class="ttc" id="util_8h_html_af8985880cf4ef26df0a5aa2ffcb76662"><div class="ttname"><a href="../../d8/d3c/util_8h.html#af8985880cf4ef26df0a5aa2ffcb76662">error</a></div><div class="ttdeci">static bool error(const char *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00191">util.h:191</a></div></div>
<div class="ttc" id="class_c_block_html_a6f7ce520ce3c63adc6216f9d41d04476"><div class="ttname"><a href="../../d3/d51/class_c_block.html#a6f7ce520ce3c63adc6216f9d41d04476">CBlock::nVersion</a></div><div class="ttdeci">int nVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00629">main.h:629</a></div></div>
<div class="ttc" id="class_c_block_index_html_a3324894e6af612d1bd76f89378435713"><div class="ttname"><a href="../../d3/dbd/class_c_block_index.html#a3324894e6af612d1bd76f89378435713">CBlockIndex::nBits</a></div><div class="ttdeci">unsigned int nBits</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00931">main.h:931</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a206d1c747985d51a94cdfc830357114a"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a206d1c747985d51a94cdfc830357114a">GetNextTargetRequiredV1</a></div><div class="ttdeci">unsigned int GetNextTargetRequiredV1(const CBlockIndex *pindexLast, bool fProofOfStake)</div><div class="ttdoc">Calculate difficulty using retarget algorithm V1 by maintaining target. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00082">proofs.cpp:82</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="../../d8/d3c/util_8h.html">util.h</a></div></div>
<div class="ttc" id="hash_8h_html_ab3f6c437460137530d86e09c2c102e99"><div class="ttname"><a href="../../db/dfb/hash_8h.html#ab3f6c437460137530d86e09c2c102e99">Hash</a></div><div class="ttdeci">uint256 Hash(const T1 pbegin, const T1 pend)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfb/hash_8h_source.html#l00069">hash.h:69</a></div></div>
<div class="ttc" id="classuint256_html_a62d6d46078edb8cdb742e2430a3b1998"><div class="ttname"><a href="../../d2/d86/classuint256.html#a62d6d46078edb8cdb742e2430a3b1998">uint256::GetCompact</a></div><div class="ttdeci">uint32_t GetCompact(bool fNegative=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d69/uint256_8cpp_source.html#l00275">uint256.cpp:275</a></div></div>
<div class="ttc" id="class_c_chain_params_html_abee677792d8f64e9dc766738ca0fbb55"><div class="ttname"><a href="../../d1/d4f/class_c_chain_params.html#abee677792d8f64e9dc766738ca0fbb55">CChainParams::GenesisBlock</a></div><div class="ttdeci">virtual const CBlock &amp; GenesisBlock() const =0</div></div>
<div class="ttc" id="proofs_8cpp_html_af6a2f3451bae59ba9d7a6d627173aedf"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#af6a2f3451bae59ba9d7a6d627173aedf">GetCoinbaseValue</a></div><div class="ttdeci">int64_t GetCoinbaseValue(int nHeight, CAmount nFees)</div><div class="ttdoc">Determine Block Reward for Proof Of Work. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00039">proofs.cpp:39</a></div></div>
<div class="ttc" id="util_8h_html_a5f5e63e2c340bc52049e38c09b37e6e1"><div class="ttname"><a href="../../d8/d3c/util_8h.html#a5f5e63e2c340bc52049e38c09b37e6e1">BEGIN</a></div><div class="ttdeci">#define BEGIN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00047">util.h:47</a></div></div>
<div class="ttc" id="classuint256_html"><div class="ttname"><a href="../../d2/d86/classuint256.html">uint256</a></div><div class="ttdoc">256-bit unsigned big integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4d/uint256_8h_source.html#l00322">uint256.h:322</a></div></div>
<div class="ttc" id="class_c_chain_params_html_a3a3f83ef3c1492eb473756db0a7f6d2d"><div class="ttname"><a href="../../d1/d4f/class_c_chain_params.html#a3a3f83ef3c1492eb473756db0a7f6d2d">CChainParams::TargetTimespan</a></div><div class="ttdeci">int TargetTimespan() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddb/chainparams_8h_source.html#l00064">chainparams.h:64</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a12388da9cd7b3a99208684bd4535f098"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a12388da9cd7b3a99208684bd4535f098">nModifierInterval</a></div><div class="ttdeci">unsigned int nModifierInterval</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00020">proofs.cpp:20</a></div></div>
<div class="ttc" id="class_c_block_html_a681acf1fa72ec2ed6c83ea5afc14e0f3"><div class="ttname"><a href="../../d3/d51/class_c_block.html#a681acf1fa72ec2ed6c83ea5afc14e0f3">CBlock::GetHash</a></div><div class="ttdeci">uint256 GetHash() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00022">proofs.cpp:22</a></div></div>
<div class="ttc" id="uint256_8h_html"><div class="ttname"><a href="../../d5/d4d/uint256_8h.html">uint256.h</a></div></div>
<div class="ttc" id="class_c_block_index_html"><div class="ttname"><a href="../../d3/dbd/class_c_block_index.html">CBlockIndex</a></div><div class="ttdoc">The block chain is a tree shaped structure starting with the genesis block at the root...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00896">main.h:896</a></div></div>
<div class="ttc" id="chainparams_8cpp_html_ace5c5b706d71a324a417dd2db394fd4a"><div class="ttname"><a href="../../df/dbf/chainparams_8cpp.html#ace5c5b706d71a324a417dd2db394fd4a">Params</a></div><div class="ttdeci">const CChainParams &amp; Params()</div><div class="ttdoc">Return the currently selected parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbf/chainparams_8cpp_source.html#l00203">chainparams.cpp:203</a></div></div>
<div class="ttc" id="classuint256_html_a54bc91c8535c43f881bba1fdb11ca7fa"><div class="ttname"><a href="../../d2/d86/classuint256.html#a54bc91c8535c43f881bba1fdb11ca7fa">uint256::SetCompact</a></div><div class="ttdeci">uint256 &amp; SetCompact(uint32_t nCompact, bool *pfNegative=NULL, bool *pfOverflow=NULL)</div><div class="ttdoc">The &quot;compact&quot; format is a representation of a whole number N using an unsigned 32bit number similar t...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d69/uint256_8cpp_source.html#l00255">uint256.cpp:255</a></div></div>
<div class="ttc" id="main_8cpp_html_a67a2382a391340c12c45961f3b8c66e8"><div class="ttname"><a href="../../df/d0a/main_8cpp.html#a67a2382a391340c12c45961f3b8c66e8">GetLastBlockIndex</a></div><div class="ttdeci">const CBlockIndex * GetLastBlockIndex(const CBlockIndex *pindex, bool fProofOfStake)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/main_8cpp_source.html#l01456">main.cpp:1456</a></div></div>
<div class="ttc" id="amount_8h_html"><div class="ttname"><a href="../../dd/d2f/amount_8h.html">amount.h</a></div></div>
<div class="ttc" id="main_8cpp_html_a6454ad864029344132a0a0b59b1456ee"><div class="ttname"><a href="../../df/d0a/main_8cpp.html#a6454ad864029344132a0a0b59b1456ee">pindexBest</a></div><div class="ttdeci">CBlockIndex * pindexBest</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/main_8cpp_source.html#l00053">main.cpp:53</a></div></div>
<div class="ttc" id="proofs_8cpp_html_a84af3aad491438b64bc1a79a7fd1d659"><div class="ttname"><a href="../../d1/d08/proofs_8cpp.html#a84af3aad491438b64bc1a79a7fd1d659">GetCoinstakeValue</a></div><div class="ttdeci">int64_t GetCoinstakeValue(int64_t nCoinAge, CAmount nFees, int nHeight)</div><div class="ttdoc">Determine Block Reward for Proof Of Stake. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d08/proofs_8cpp_source.html#l00051">proofs.cpp:51</a></div></div>
<div class="ttc" id="class_c_block_index_html_aebfc8d6b95852546760e742553d7bfd5"><div class="ttname"><a href="../../d3/dbd/class_c_block_index.html#aebfc8d6b95852546760e742553d7bfd5">CBlockIndex::nHeight</a></div><div class="ttdeci">int nHeight</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/main_8h_source.html#l00905">main.h:905</a></div></div>
<div class="ttc" id="class_c_chain_params_html_a15f2665cd555d316b2f93d842f1975ee"><div class="ttname"><a href="../../d1/d4f/class_c_chain_params.html#a15f2665cd555d316b2f93d842f1975ee">CChainParams::TargetSpacing</a></div><div class="ttdeci">int TargetSpacing() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddb/chainparams_8h_source.html#l00063">chainparams.h:63</a></div></div>
<div class="ttc" id="proofs_8h_html"><div class="ttname"><a href="../../d7/d48/proofs_8h.html">proofs.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 25 2017 19:20:50 for 🗺️Ion Core Wallet CE ©️ 👒 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
